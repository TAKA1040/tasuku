# Search画面 追加機能会議ログ

## 📅 開始日時
2025-09-24 (火曜日)

## 🎯 現状分析

### **既存のSearch機能**
- 現在のsearch画面の状況を確認中...
- 既存機能の把握が必要

## 💬 会議記録

### **2025-09-24 会議開始**

**議題**: Search画面の追加機能について

**参加者**: ユーザー、Claude Code

**現在の状況**:
- 繰り返しタスク再設計が完了
- 次のフェーズとしてSearch機能強化を検討

**確認した既存機能**:
- 検索クエリ、フィルター機能
- TaskTable表示、編集機能
- 通常タスク + 繰り返しタスク対応

**検討する追加機能**:
1. **統一ルール対応**: 古い表示を新しい統一ルールに更新
2. **まとめて削除機能**: チェックした項目の一括削除

**課題**: 既存のタスク完了用チェックボックスとの混同問題

**解決策決定**:
- **UI設計**: 操作エリアの右側に削除用チェックボックスを追加
- **削除モード**: 「削除モードを有効化」ボタンで削除列の表示/非表示切替
- **削除制限**: 一度に100件まで。超過時は警告メッセージ表示
- **並び替え機能**: フィルター部分に並び順選択を追加（重要度順、作成日順、期限日順等）
- **エラーハンドリング**: 部分削除失敗時は「〇件中△件削除完了」メッセージ
- **削除後の状態**: フィルター設定を維持、成功メッセージ表示

**技術仕様**:
- useUnifiedTasks使用で統一ルール対応
- Set<string>で選択状態管理
- バルク削除APIでパフォーマンス最適化
- 削除確認ダイアログで誤操作防止

---

## 📋 新しいタスク作成画面の機能追加

### **2025-09-24 タスク作成機能会議**

**現状の問題**:
- カテゴリ「買い物」のタスクは子タスク（買い物リスト）を持つ仕組み
- 現在は予定表画面でのみ買い物リスト項目を登録可能
- 新しいタスク作成画面では買い物リストを登録できない

**要求機能**:
- 新しいタスク作成時に、カテゴリ「買い物」選択で買い物リスト入力欄を表示
- 関連URLの上に配置
- 親タスク作成と同時に子タスク（買い物リスト項目）も作成

**実装方針**:
```typescript
// カテゴリ「買い物」選択時の条件付き表示
{category === '買い物' && (
  <ShoppingListInput
    onAddShoppingItem={handleAddShoppingItem}
  />
)}
```

**技術仕様**:
- 既存のShoppingTasksSectionと同様の機能をTaskCreateForm2に統合
- 親子タスク関係を維持
- 統一ルール（category: '買い物' + due_date: '2999-12-31'）で子タスク保存

---
*開始時刻: 2025-09-24*