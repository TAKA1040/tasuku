これから**参照置換のみ**を段階実行します。**新しいDBテーブルやVIEWは作らない**でください。各ステップごとに停止し、私のOKを待って次へ進んでください。

対象と方針（置換ポリシー）:
- ideas → unified_tasks（条件: task_type='IDEA'）
- tasks → unified_tasks（条件: task_type='NORMAL'）
- recurring_tasks → unified_tasks（条件: task_type='RECURRING'）
- recurring_logs → done（条件: RECURRING系の完了記録）
- user_settings → user_metadata（可能な範囲で置換。難しければ一旦保留可）
- 旧VIEW（today_tasks / tasks_with_urgency / user_task_stats）は**再作成しない**。必要なら unified_tasks のクエリで代替。

ステップ:
1) `src/lib/db/supabase-database.ts` の `.from('ideas'|'tasks'|'recurring_tasks')` を上記方針で全置換し、diff と変更点の要約を提示 → 停止。
2) `src/lib/services/completion-tracker.ts` の `recurring_logs` 参照を `done` に読み替え。必要なJOIN/条件の変更点を要約 → 停止。
3) `src/lib/db/migrate-to-unified.ts` の旧テーブル依存を削除/無効化 or 新設計に沿って最小修正（実運用で動かさない想定なら無効化で可） → 停止。
4) `src/types/supabase.ts` の旧テーブル/旧VIEWの型を削除 or 置換。ビルドが通るまで型エラーを解消 → 停止。
5) `user_settings` の4箇所を `user_metadata` に置換できる範囲で実施。難しい箇所は理由と代替案を提示 → 停止。
6) スモークテスト手順を実施（today/search/done/manageのロード、CRUD、繰り返し生成→完了）。404/409やTSエラーがないかレポート → 停止。

禁止事項:
- DBスキーマ変更（新しいテーブル/VIEWの作成、マイグレーションの追加）
- 大規模設計変更の提案（今回は参照置換のみ）
- 自動コミットやPR作成（diff提示まで）

最後に、受け入れ基準（旧参照ゼロ、ビルドOK、主要画面OK、404/409ゼロ）に基づく完了レポートを出してください。
