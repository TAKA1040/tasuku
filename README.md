# tasuku (タスク管理アプリ)

シンプルで使いやすいタスク管理Webアプリケーション

## 🌐 本番環境

https://tasuku.apaf.me

## 📖 概要

tasukuは、日々のタスクを効率的に管理するためのWebアプリケーションです。
Google認証によるセキュアなログイン、繰り返しタスクの自動生成、買い物リスト管理など、実用的な機能を備えています。

## ✨ 主な機能

### 📋 タスク管理
- **今日のタスク**: 本日期限のタスクを一覧表示
- **明日以降のタスク**: 将来の予定を管理
- **期限切れタスク**:
  - 通常タスクと繰り返しタスクを分離表示
  - 繰り返しタスクは二重折りたたみでスッキリ表示
  - 自動削除機能で古い期限切れタスクを整理
- **やることリスト**: 期限なしのタスク管理

### 🔄 繰り返しタスク
- **自動生成**: 毎日、週次、月次のタスクを自動生成
- **生成期間**:
  - 日次: 今日を含めた3日間（今日、昨日、一昨日）
  - 週次: 先週の月曜日〜翌週の日曜日まで（14日分）
  - 月次: 1年前から1年後の前日まで（約730日分）
- **自動削除**:
  - 日次タスク: 期限から3日経過で自動削除
  - 週次タスク: 期限から7日経過で自動削除
  - 月次タスク: 期限から365日経過で自動削除

### 🛒 買い物リスト
- サブタスク機能による詳細な買い物リスト作成
- 完了時の未完了アイテム自動繰り越し

### 📊 統計・分析
- タスク完了率の可視化
- 30日カレンダー表示による達成記録追跡
- 連続達成日数の表示

### 🎨 UI/UX
- ダークモード対応
- レスポンシブデザイン（モバイル・タブレット・デスクトップ対応）
- ソート機能（重要度順・時間軸順）

## 🛠️ 技術スタック

### フロントエンド
- **Next.js 15.5.3** (App Router)
- **React 19** (RC)
- **TypeScript**

### バックエンド・インフラ
- **Supabase** (PostgreSQL, 認証)
- **Vercel** (ホスティング・デプロイ)

### 認証
- Google OAuth 2.0

## 🚀 デプロイ

デプロイは専用のworktreeを使用して行います。

```bash
# デプロイ用worktreeに移動
cd ../tasuku-deploy

# 最新のmainブランチを取得
git fetch origin --prune
git reset --hard origin/main

# 本番デプロイ
vercel --prod --yes

# デプロイ確認
vercel inspect <Production URL>
```

## 📝 開発

### ローカル開発環境

```bash
# 依存関係インストール
npm install

# 開発サーバー起動
npm run dev

# ビルド
npm run build

# 型チェック
npm run type-check

# Lint
npm run lint
```

### 環境変数

`.env.local` に以下の環境変数を設定してください:

```
NEXT_PUBLIC_SUPABASE_URL=<your-supabase-url>
NEXT_PUBLIC_SUPABASE_ANON_KEY=<your-supabase-anon-key>
```

## 📁 プロジェクト構造

```
tasuku/
├── src/
│   ├── app/              # Next.js App Router ページ
│   ├── components/       # Reactコンポーネント
│   ├── hooks/           # カスタムフック
│   ├── lib/
│   │   ├── db/          # データベースサービス層
│   │   ├── services/    # ビジネスロジック
│   │   ├── supabase/    # Supabase クライアント
│   │   └── utils/       # ユーティリティ関数
│   └── types/           # TypeScript型定義
├── supabase/            # Supabase設定・マイグレーション
├── WORK_HISTORY.md      # 作業履歴（重要なルール記録）
└── README.md
```

## 🔐 セキュリティについて

本アプリケーションは現在β版テスト運用中です。正式版リリースに向けて、実際の利用環境での動作確認を行っている段階となります。

### データの暗号化について

現在テスト運用中のため、タスクデータの暗号化処理は実装されていません。これは運用テストを円滑に進めるための意図的な措置です。暗号化してしまうと、テスト段階での問題発見や改善が困難になるため、この判断を行っています。

そのため、現在の状態ではデータベース管理者がタスクの内容を技術的に確認できる状態となっています。ただし、関係者が直接タスク内容を見ることはありません。また、ユーザー同士のデータについては、Row Level Security（RLS）という仕組みにより完全に分離されており、他のユーザーがあなたのタスクを見ることは一切できません。

**このような理由から、β版では個人情報に関わるような内容をタスクに記載しないようお願いいたします。**

### 正式版での変更予定

正式版に移行した際には、すべてのタスクデータが暗号化されます。暗号化が実装されると、管理者を含めて誰もタスクの内容を確認することができなくなり、セキュリティ面が大幅に向上します。

ただし、暗号化によりセキュリティが向上する一方で、ログイン情報を紛失した場合のデータ復旧ができなくなります。具体的には、ログインしたアカウントがわからなくなってしまった場合、そのアカウントで作成したタスクを見ることができなくなってしまいます。このような場合、データの復旧はできませんので、Googleアカウントの管理には十分ご注意ください。

### β版利用時の注意事項

現在は暗号化が実装されていないため、個人を特定できるような情報や機密性の高い情報は記載しないようお願いします。具体的には、氏名・住所・電話番号などの個人情報、クレジットカード番号や銀行口座情報、パスワードやアクセストークン、社外秘情報などの機密情報、その他プライバシーに関わる詳細な内容は避けてください。

β版では、「買い物に行く」「掃除をする」といった日常的なタスクや、「資料作成」「会議準備」などの概要的な業務タスク、「運動する」「本を読む」といった習慣タスクなど、個人を特定できない一般的な内容のみを記載していただくことを推奨します。

### 実装済みのセキュリティ対策

- **Row Level Security (RLS)**: Supabaseのテーブルレベルでユーザーデータを保護
- **ユーザー分離**: 全てのクエリで `user_id` フィルターを適用
- **Google認証**: OAuth 2.0による安全なログイン
- **通信暗号化**: HTTPS通信によるデータ送受信の保護

詳細は [SECURITY_NOTICE.md](./SECURITY_NOTICE.md) をご覧ください。

## 📚 ドキュメント

- **WORK_HISTORY.md**: 作業履歴と重要なルール（生成期間、削除ルールなど）
- **PROJECT_STATUS.md**: プロジェクトの現状と課題
- **SECURITY_AND_CI_DECLARATION.md**: セキュリティとCI/CD方針

## 🐛 既知の問題

既知の問題については `PROJECT_STATUS.md` を参照してください。

## 📄 ライセンス

MIT

## 👤 作成者

TAKA1040

---

**Last Updated**: 2025-10-02
